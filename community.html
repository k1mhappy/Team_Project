<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>마이펫 - 커뮤니티</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css"
    />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="css/community.css" />

    <script type="module" src="/Team_Project/components/navbar.js"></script>
    <script type="module" src="/Team_Project/components/post2.js"></script>
    <script src="/Team_Project/javascript/community.js"></script>

    <script
      type="text/javascript"
      src="https://code.jquery.com/jquery-3.5.0.min.js"
    ></script>
    <script
      src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"
      integrity="sha256-xLD7nhI62fcsEZK2/v8LsBcb4lG7dgULkuXoXB/j91c="
      crossorigin="anonymous"
    ></script>
    <script src="javascript/index.js"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="/javascript/community.js"></script>
    <script>
      sessionStorage.setItem('currentPageNum','1');
      getPosts(sessionStorage.getItem('currentPageNum'));
    </script>
  </head>
  <body>
    <nav-bar></nav-bar>
    <div class="container">
      <div class="board_wrap">
        <div class="pageTitle">
          <h1>자유 커뮤니티
          </h1>
        </div>
        <div class="btn-group" style="display: flex; gap: 8px;">
          <custom-button data-type="primary" data-label="글쓰기" onclick="writePost()"></custom-button>
        </div>
        <div class="board_list_wrap">
          <div class="board_list">
            <div class="clickableDiv" onclick="toggleContent(); clickPost(1)" id="post1"> <!--글 한문단-->
              <!--보드게시판-->
              <!-- 선택한 글 저장을 위해 a태그 추가 -->
              <h4 class="title"></h4>
              <p class="content"></p>
              <div class="writer"></div>
              <div class="date"></div>
              <div style="display: block;" id="content1" class="hidden">
                라라라라라라라라로리로리ㅗ리ㅗ리라루리뤼루릴<!--글 상세내용-->
              </div>
            </div>
            
            <div class="clickableDiv" onclick="toggleContent(); clickPost(2)" id="post2">
              <h4 class="title"></h4>
              <p class="content"></p>
              <div class="writer"></div>
              <div class="date"></div>
              <!-- <div id="content2" class="hidden2">
                라라라라라라라라로리로리ㅗ리ㅗ리라루리뤼루릴
              </div> -->
            </div>

            <div class="clickableDiv" onclick="toggleContent(); clickPost(3)" id="post3">
              <h4 class="title"></h4>
              <p class="content"></p>
              <div class="writer"></div>
              <div class="date"></div>
              <!-- <div id="content3" class="hidden3">
                라라라라라라라라로리로리ㅗ리ㅗ리라루리뤼루릴
              </div> -->
            </div>

            <div class="clickableDiv" onclick="toggleContent(); clickPost(4)" id="post4">
              <h4 class="title"></h4>
              <p class="content"></p>
              <div class="writer"></div>
              <div class="date"></div>
              <!-- <div id="content4" class="hidden4">
                라라라라라라라라로리로리ㅗ리ㅗ리라루리뤼루릴
              </div> -->
            </div>
          </div>

          <div class="board_page pageNumber">
            <a href="#" class="first"><<</a>
            <a href="#" class="prev"><</a>
            <a href="#" class="num on" data-page="1" id="pageNum1">1</a>
            <a href="#" class="num" data-page="2" id="pageNum2">2</a>
            <a href="#" class="num" data-page="3" id="pageNum3">3</a>
            <a href="#" class="num" data-page="4" id="pageNum4">4</a>
            <a href="#" class="num" data-page="5" id="pageNum5">5</a>
            <a href="#" class="next">></a>
            <a href="#" class="last">>></a>
        </div>
        </div>
      </div>
    </div>
    <script>
      // 페이지 번호를 감지하는 함수
      function handlePageClick(event) {
        // 이벤트가 발생한 a 태그의 기본 동작을 막습니다.
          event.preventDefault();
  
        // 클릭된 페이지 번호를 가져옵니다.
          const clickedPage = event.target.dataset.page;
  
          const defaultPageNum = document.getElementsByClassName('on');

          // HTMLCollection이므로 인덱스로 개별 요소에 접근
          for (let i = 0; i < defaultPageNum.length; i++) {
              defaultPageNum[i].classList.remove('on');
          }

          const pageNum = document.getElementById(`pageNum${clickedPage}`);
          pageNum.classList.add('on');
          console.log(pageNum);

          getPosts(pageNum.innerText);
      }
      // 모든 페이지 번호를 가진 a 태그에 클릭 이벤트 리스너를 추가합니다.
      const pageLinks = document.querySelectorAll('.pageNumber');
      pageLinks.forEach(link => {
          link.addEventListener('click', handlePageClick);
      });
  </script>
  </body>
</html>